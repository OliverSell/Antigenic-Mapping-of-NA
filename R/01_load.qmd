## Source functions

```{r}
source("../R/99_proj_func.R")
```

## Libraries

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false

library("tidyverse")
library("readxl")

# https://stackoverflow.com/questions/4090169/elegant-way-to-check-for-missing-packages-and-install-them
```

# Antigenic Cartography - COVID

Antigen names; H69775 (Wuhan), Alpha (B.1.1.7), Beta (B.1.351), Gamma (P.1), Delta B.1.617.2, Delta AY.33, Delta AY.4, Delta AY.4.2, Delta B.1.617.2 and E484K Omicron

## Generate data directories
```{r}
make_dir("../_raw")
make_dir("../data")
```

## Loading excel file

```{r}
## SPØRG MARTHA
## SPØRG MARTHA
## SPØRG MARTHA
excel_data <- read_excel("../_raw/antigenic_map_template_covid.xlsx")  ## AUTOMATE
## SPØRG MARTHA
## SPØRG MARTHA
## SPØRG MARTHA

write_csv(excel_data, "../_raw/excel_csv.csv.gz")
```


## Loading data
```{r}
#| echo: false
#| message: false
#| output: false

## Loading titer data from pre-made csv file
#titer_table <- read_csv2(file = "../_raw/antigenic_map_template_covid.csv")

## Loading titer data from generated csv file
titer_table <- read_csv(file = "../_raw/excel_csv.csv.gz")


```

## Writing files
```{r}

## Writing titer file
write_tsv(titer_table,
            file = "../data/titer_table.tsv.gz")

```
